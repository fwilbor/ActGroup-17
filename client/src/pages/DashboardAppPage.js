import { Helmet } from 'react-helmet-async';
import { faker } from '@faker-js/faker';
import { useState, useEffect } from 'react'
import { useNavigate } from 'react-router-dom'
// @mui
import { useTheme } from '@mui/material/styles';
import { Grid, Container, Typography } from '@mui/material';
import { getAllChildren, getChildMessages, getSessionTime, getAllFriends } from 'src/utils/APIRoutes';
import MessageForm from '../components/MessageForm';
import GetPieChart from "../components/GetPieChart.js"
import GetRecentMessages from "../components/GetRecentMessages.js"
import GetFriends from "../components/GetFriends.js"
import axios from 'axios';
import React from 'react';
import defaultAvatar from "../assets/logo-80x80.png";
import { toast } from "react-toastify";

// sections
import {
  AppNewsUpdate,
  AppCurrentVisits,
  AppWebsiteVisits,
  AppWidgetSummary,
  AppConversionRates,
} from '../sections/@dashboard/app';

// ----------------------------------------------------------------------

export default function DashboardAppPage() {

  const navigate = useNavigate();
  const [sessionTime, setSessionTime] = useState("");
  const [childName, setChildName] = useState("");
  var [childUser, setChildUser] = useState("");
  const [children, setChildren] = useState([]);
  const [selectedUser, setSelectedUser] = React.useState(null);
  const [childId, setChildId] = useState("");
  const [childAvatar, setChildAvatar] = useState("");
  const [friendsList, setFriendslist] = useState("");
 
// load the default avatar image
const split = defaultAvatar.split(',');
    const base64string = split[1];
    const base63string = "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"
    // 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
    // PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMzEgMjMxIj48cGF0aCBkPSJNMzMuODMsMzMuODNhMTE1LjUsMTE1LjUsMCwxLDEsMCwxNjMuMzQsMTE1LjQ5LDExNS40OSwwLDAsMSwwLTE2My4zNFoiIHN0eWxlPSJmaWxsOiNkMTAwODQ7Ii8+PHBhdGggZD0ibTExNS41IDUxLjc1YTYzLjc1IDYzLjc1IDAgMCAwLTEwLjUgMTI2LjYzdjE0LjA5YTExNS41IDExNS41IDAgMCAwLTUzLjcyOSAxOS4wMjcgMTE1LjUgMTE1LjUgMCAwIDAgMTI4LjQ2IDAgMTE1LjUgMTE1LjUgMCAwIDAtNTMuNzI5LTE5LjAyOXYtMTQuMDg0YTYzLjc1IDYzLjc1IDAgMCAwIDUzLjI1LTYyLjg4MSA2My43NSA2My43NSAwIDAgMC02My42NS02My43NSA2My43NSA2My43NSAwIDAgMC0wLjA5OTYxIDB6IiBzdHlsZT0iZmlsbDojNzU1MjI3OyIvPjxwYXRoIGQ9Im0xMTUuNSAyMzFhMTE1IDExNSAwIDAgMCA2NC4yMy0xOS41IDExNC43OSAxMTQuNzkgMCAwIDAtMzgtMTYuNWwtMi40MS05YTEyNS4xOSAxMjUuMTkgMCAwIDAtMTMuMzItMi4yOHY4Ljc1cTMuNTIgMC4zMiA3IDAuODRsLTE3LjUgMTcuNDgtMTcuNS0xNy40OHEzLjQ1LTAuNTIgNy0wLjg0di04Ljc1YTEyNS41NSAxMjUuNTUgMCAwIDAtMTMuMzQgMi4yOGwtMi40MSA5YTExNC43OSAxMTQuNzkgMCAwIDAtMzggMTYuNSAxMTQuOTQgMTE0Ljk0IDAgMCAwIDY0LjI1IDE5LjV6IiBzdHlsZT0iZmlsbDojMEQwMDQ2OyIvPjxwYXRoIGQ9Im0xMzIuOTggMTkzLjMzLTM2LjE4NSAzNi4xNTUtMi40LTAuNDIgMzYuMTA4LTM2LjA4MXoiIHN0eWxlPSJmaWxsOiNmZmNlNzM7Ii8+PHBhdGggZD0ibTEyNC4yMiAxMy42MWMtMTkuNzgzIDAtMzYuOTQ1IDguMDg4Ny0zOS42OTUgMjQuMTA2LTE1LjMzMiAwLjIzNTM5LTMxLjgzMSAyLjc3MTItNDEuNjYzIDE1Ljc4Mi02LjAyMzggNy45NjA0LTcuMDQwMiAxOS45MDEtNi44NDc2IDMxLjcyNCAwLjQ2MDA3IDI4LjUwMyAxMC43NDIgNjQuMjI4LTQuMzAxMiA4OS43MTQgMTYuNTg0IDUuNzc3NyA0My4wODYgMTAuNzQyIDczLjU5IDExLjY2MnYtOC42NTU4Yy0xLjg1MS0wLjM1MzA4LTMuNjU5Mi0wLjc4MTA1LTUuNDM1My0xLjI3MzItMzAuOTUzLTguNDYzMi01MC42NzItMzYuNjM1LTQ3LjI1OS02OC42NjkgMS41NTE0LTEwLjYwMyA0LjYyMjEtMTkuNjY1IDEwLjAyNS0yNy42OSA1LjM4MTgtNy45OTI1IDEzLjI2Ny0xNS43MTcgMjMuODkyLTIxLjQxIDAuNDA2NTggMC43Mjc1NyAxLjk5MDEgMy41ODQzIDIuNDA3NCA0LjMwMTIgNy41MDAzIDEyLjc3NSAxNy45ODYgMjMuODQ5IDMzLjE1NyAyNi44NjYgMTIuNDMzIDIuNDYwOSAyMy44NDkgMy40NjY2IDM2LjM0NiAxLjE1NTUgNC4yNTg0LTAuNzgxMDYgMTAuNjY3LTIuMzk2NyAxNC44NTEtMi40MTgxIDE0Ljg2MSAzMy40MDQtMS4wODA2IDc1LjAzNS00MC42NjggODcuNDU3LTIuMjI1NSAwLjcwNjE2LTQuNTI1OCAxLjMxNi02Ljg5MDQgMS44MTg5IDAgMi43MDctMC4wNDI4IDUuNjQ5My0wLjA2NDIgOC41Mjc0IDIzLjYwMy0wLjcyNzU3IDQ4LjY4Mi00LjA0NDQgNzIuODc0LTExLjIzNC0xOC41MjEtMzIuMTUyIDAuODEzMTUtODkuMDgzLTEwLjAzNi0xMjEuNDYtOS4wNzMxLTI2Ljk3My0zOC44NS00MC4zMTUtNjQuMjgyLTQwLjMwNXoiIHN0eWxlPSJmaWxsOiNmZGZmMDA7Ii8+PHBhdGggZD0ibTMzLjE0NyAxNzIuMzJjLTIuNjUzNSA1LjExNDMtNi4wODggOS45NTA0LTEwLjEgMTIuNDExIDcuODQyNyAxMC40NTMgMTcuMzg3IDE5LjUxNiAyOC4yNTcgMjYuNzgxIDE2LjAzOC0xMC43MzEgMzUuNjI5LTE3LjA1NSA1NC0xOC42MDZ2LTkuMDA4OWMtMzAuMDY1LTAuOTQxNTUtNTYuMTA4LTUuODg0Ny03Mi4xNTctMTEuNTc3em0xNjQuMDYgMC41NTYzN2MtMjMuNzMxIDcuMDcyMy00OC4zNjEgMTAuMzI1LTcxLjUyNSAxMS4wNDItMC4wMzIxIDMuMTI0Mi0wLjA1MzUgNi4yMzc3LTAuMDEwNyA5LjA1MTcgMTkuMjI3IDEuNzIyNiAzNy45MDggNy44NTM0IDUzLjk4OSAxOC41NDIgMC4wMTA3IDAgMC4wMTA3IDAgMC4wMjE0IDAuMDEwNyAxMC43MzEtNy4xNjg2IDIwLjE3OS0xNi4wODEgMjcuOTU4LTI2LjM3NC00LjI3OTgtMi4zOTY3LTcuODMyLTYuOTY1My0xMC40MzItMTIuMjcyeiIgc3R5bGU9ImZpbGw6I2ZkZmYwMDsiLz48cGF0aCBkPSJtNTAuMDIgNDYuNWMtMi45Mjk3IDEuOTE0My02LjEzMTMgMy44ODI2LTEwLjE1NCA3Ljk4MDUtMTQuMDkxIDE0LjM1OS0xNi4xNDUgMjcuNzAxLTYuMTQwNiA0NC4wMTggNC4yMDQ5IDYuODU4MyA2LjE0MTQgMTMuNzA2LTAuMjQ2MDkgMjAuNS03LjcxNDMgOC4xOTU3LTIxLjU1OSA0LjI5MTItMjEuNTM3IDE2LjA2MSAwLjAyMTQgOC42MTMgMTUuMDYzIDcuOTE3OCAyMi41MzEgMTMuOTg0IDMuNzY2MiAzLjA3MDcgNS4wODM2IDguMzk5MiAyLjA2NjQgMTIuNTA4LTQuMjE1NiA1Ljc0NTYtMTYuMDA2IDcuMzcxNS0yMi42MjkgOC45MzM2IDUuODgxMSAxMC44NDMgMTMuNDUgMjAuNjM4IDIyLjM1NSAyOS4wMzNsMC4wMDM5IDAuMDIzNCAwLjAwNTktMC4wMTM3YzJlLTMgMmUtMyAwLjAwMzggNGUtMyAwLjAwNTkgNmUtMyAwLjAwMzQtMC4wMTEyIDAuMDA2My0wLjAyMTkgMC4wMDk4LTAuMDMzMiAxNC43NzUtMTIuMjE4IDIwLjI2OC0yMC45NjUgNDkuNDYxLTI4LjQzNC0xNy40MDQtMTAuMjU4LTMwLjY4LTI3LjEyMi0yNC4xNDMtMzUuMzQgNC40MTIzLTUuNTQ0NCA1LjY2MTItNy44NjMzIDYuNDA2Mi0xMi4wNzggMi4zNTgyLTEzLjMzOS0xMC4yMDgtMjIuMzM1LTkuMjM2My0zMi43MTUgMS45NDMyLTguMjM0NiAxMS4zNzktMTEuMTczIDE2Ljk0Ny0xNS4xMTUgNS40NTc3LTMuOTA4MiA5LjgwMTQtOC43Njk1IDEwLjc5OS0xNi45MTgtMTMuNTU4LTQuODg5Ni0xNy42MDktNS44NjE3LTM2LjUwNi0xMi40em0xNDAuODcgMTkuMzU3Yy0zLjQ0MDQtMC45MTI0My0yMy4zMTEgMTIyLjQzIDQuNDEyMSAxMzMuMTQgOC45NjYxLTguNTgwOSAxNi41NTItMTguNTg0IDIyLjQwNC0yOS42NTggMC0wLjMxMDI5LTI1LjEzMy0zLjk5MjItMjUuOTc5LTE0LjAxOC0wLjEwNjk5LTEuMTc2OSAwLjExODIyLTEuNDg1NSAwLjg2NzE4LTIuNTAyIDYuNjc2NC05LjIxMjIgMzAuNzE2LTExLjQxNiAyOS42NDYtMjMuNDk2LTAuMjc4MTgtMy4xNTYzLTQuMTYxNy01LjIzMzQtNi43NDAyLTYuNDUzMS0xMi4xNTUtNS43NjctMzIuOTQyLTkuNjQ5NC0xNS4wMzEtMjQuNTQzIDkuMjEyMi03LjM1MDUgMTAuNDMtOC40MzIzIDAuNTk3NjYtMTQuNjkxLTkuNDU4My02LjAyMzgtOS4zOTQtMTEuOTkzLTkuNzU3OC0xNi4zMjYtMC4wNzY3LTAuOTMwMzUtMC4yMjA4OS0xLjQwMDMtMC40MTk5Mi0xLjQ1MzF6IiBzdHlsZT0iZmlsbDpub25lOyIvPjxwYXRoIGQ9Im0xMzMuODMgMzkuOTA5Yy0xMS4zMyAxLjM5My05LjU0OTIgMTYuMjA0LTJlLTMgMTYuNjQzLTQuNTEwMiAxMC43MTcgOS4wMTY1IDE2LjE4MSAxNC40NDEgOC4zMTI1IDYuNTYyIDguNjc2NSAxOC41OTYgMC45NDc1MSAxNC40NTctOC4zMTI1IDExLjcxOC0xLjUzODEgOS4yNzY5LTE2LjA5OSAwLTE2LjY0MyA0LjUwMy0xMC44NjctOS40ODgzLTE2LjEwMS0xNC40NTctOC4zMzAxLTYuODgzMi05LjA0MTEtMTguNTA5LTAuNDczMjEtMTQuNDM5IDguMzMwMXoiIHN0eWxlPSJmaWxsOm5vbmU7Ii8+PHBhdGggZD0ibTE1My44NiA0OC4yMjJjMC0zLjA1MjgtMi41MTg0LTUuNTY0OC01LjU3OTEtNS41NjQ4LTMuMDc4MyAwLTUuNTc5MyAyLjUxMi01LjU3OTMgNS41NjQ4IDAgMy4wNzAzIDIuNTAxIDUuNTY0OCA1LjU3OTMgNS41NjQ4IDMuMDYwNiAwIDUuNTc5MS0yLjQ5NDYgNS41NzkxLTUuNTY0OHoiIHN0eWxlPSJmaWxsOm5vbmU7Ii8+PHBhdGggZD0ibTc4LjczIDExMWExMC45IDEwLjkgMCAwIDEgMTUuMTkgMG00My4xNiAwYTEwLjkgMTAuOSAwIDAgMSAxNS4xOSAwIiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6Ni4xOTk5cHg7c3Ryb2tlOiMwMDA7Ii8+PHBhdGggZD0ibTc5LjgwNCAxMjMuNzRoNy4wN201Ny4yNzMgMGg3LjA1IiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6NS45OTk4cHg7c3Ryb2tlOiNmZjgzM2I7Ii8+PHBhdGggZD0ibTEyNi4yOCAxNDkuODJjLTYuMTYgMi40My0xNS41MiAyLjQyLTIxLjU2IDAiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDo1Ljk5OThweDtzdHJva2U6IzAwMDsiLz48L3N2Zz4=
    // PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMzEgMjMxIj48cGF0aCBkPSJNMzMuODMsMzMuODNhMTE1LjUsMTE1LjUsMCwxLDEsMCwxNjMuMzQsMTE1LjQ5LDExNS40OSwwLDAsMSwwLTE2My4zNFoiIHN0eWxlPSJmaWxsOiNkMTAwODQ7Ii8+PHBhdGggZD0ibTExNS41IDUxLjc1YTYzLjc1IDYzLjc1IDAgMCAwLTEwLjUgMTI2LjYzdjE0LjA5YTExNS41IDExNS41IDAgMCAwLTUzLjcyOSAxOS4wMjcgMTE1LjUgMTE1LjUgMCAwIDAgMTI4LjQ2IDAgMTE1LjUgMTE1LjUgMCAwIDAtNTMuNzI5LTE5LjAyOXYtMTQuMDg0YTYzLjc1IDYzLjc1IDAgMCAwIDUzLjI1LTYyLjg4MSA2My43NSA2My43NSAwIDAgMC02My42NS02My43NSA2My43NSA2My43NSAwIDAgMC0wLjA5OTYxIDB6IiBzdHlsZT0iZmlsbDojN2I0MDFlOyIvPjxwYXRoIGQ9Im0xNDEuNzQgMTk1YTExNC45MyAxMTQuOTMgMCAwIDEgMzcuOTEyIDE2LjQ1bDAuMDcgMC4wNWMtMS4xNyAwLjc5LTIuMzYwMSAxLjU1LTMuNTYwMSAyLjI5YTExNS41NSAxMTUuNTUgMCAwIDEtMTIwLjk1IDAuMjFxLTIuMDAwMS0xLjIzLTQuMDAwMi0yLjU0YTExNC43OSAxMTQuNzkgMCAwIDEgMzguMDAyLTE2LjUgMTE2LjIxIDExNi4yMSAwIDAgMSAxNS43OTEtMi40OXYtMTQuNTdjMS4zMiAwLjIyIDIuNjUwMSAwLjM5IDQuMDAwMiAwLjUxIDIuMDAwMSAwLjE5IDQuMDAwMiAwLjI4IDYuMTIwMiAwLjI5YTY0LjMzMyA2NC4zMyAwIDAgMCA4Ljg4MDQtMC42MmMwLjY3MDAzLTAuMDkgMS4zNDAxLTAuMiAyLjAwMDEtMC4zMXYxNC42OWExMTggMTE4IDAgMCAxIDE1Ljc0MSAyLjU0eiIgc3R5bGU9ImZpbGw6IzAwMDsiLz48cGF0aCBkPSJtNzkuMjkyIDIxMmEzLjQ2MDEgMy40NiAwIDAgMCAzLjg5MDIgNS4wNyAzLjM4MDEgMy4zOCAwIDAgMCAyLjEwMDEtMS42MSAzLjQ3MDEgMy40NyAwIDAgMC0xLjI4MDEtNC43MiAzLjQyMDEgMy40MiAwIDAgMC0yLjYyMDEtMC4zNCAzLjUxMDEgMy41MSAwIDAgMC0yLjA5MDEgMS42em02MC4xMjIgMC40NmEzLjQ5MDEgMy40OSAwIDAgMCAxLjIxIDQuN2gwLjA2YTMuNDYwMSAzLjQ2IDAgMCAwIDQuNzIwMi0xLjI3bDAuMDctMC4xM2EzLjQ2MDEgMy40NiAwIDAgMC0xLjM0LTQuNiAzLjQ2MDEgMy40NiAwIDAgMC0yLjU4MDEtMC4zMiAzLjUzMDEgMy41MyAwIDAgMC0yLjEwMDEgMS42MXptOS44MDA0IDUuNyA1Ljg2MDIgNS44N2MtMS4zOSAwLjUtMi43OTAxIDEtNC4yMTAyIDEuNDRsLTQuNDgwMi00LjQ3YTcuNTIwMyA3LjUyIDAgMCAxLTEuOTQwMSAwLjgxIDcuODMwMyA3LjgzIDAgMCAxLTYuMDAwMi0wLjc5IDcuODcwMyA3Ljg3IDAgMCAxLTIuOTIwMS0xMC42OXYtMC4wN2E3Ljg5MDMgNy44OSAwIDAgMSAxMC43Ny0yLjg4bDAuMTIgMC4wN2E3Ljg2MDMgNy44NiAwIDAgMSAyLjc5MDEgMTAuNjJ2MC4wN3ptLTM3LjcwMS0yLjM2LTkuNTAwNCA5LjUxdjQuOWMtMS4zNS0wLjE2LTIuNjgwMS0wLjMzLTQuMDAwMi0wLjU0di02bDAuNTgwMDItMC41OCAxMC4xLTEwLjA5YTcuODcwMyA3Ljg3IDAgMSAxIDIuODQwMSAyLjg2em03LjMyMDMtNS45MWEzLjQ2MDEgMy40NiAwIDEgMC0xLjYxMDEgMi4xIDMuMzgwMSAzLjM4IDAgMCAwIDEuNjEwMS0yLjF6bS0yOS43NDEgNy44MiAzLjA5MDEgMy4xIDAuNTkwMDIgMC41OXY3LjM2Yy0xLjM0MDEtMC4yNi0yLjY4MDEtMC41NS00LjAwMDItMC44N3YtNC44NGwtMi41MTAxLTIuNTFhNy41MjAzIDcuNTIgMCAwIDEtMS45NDAxIDAuODEgNy44ODAzIDcuODggMCAxIDEgMS45MTAxLTE0LjQzIDcuODcwMyA3Ljg3IDAgMCAxIDIuODkwMSAxMC43NXoiIHN0eWxlPSJmaWxsOiNmZmY7Ii8+PHBhdGggZD0ibTEwOC4zNyAyMi4wMTljLTYuMjY5OC0xMi44MjktMTcuMTUxLTEzLjM5Ni0xOC45NDkgMS4xNzY5LTExLjQ0OC05LjQ1ODMtMjYuMDIxLTQuNDgzLTIwLjM2MSAxMi40MjItMTIuMjUxLTcuOTI4Mi0yNC45MTkgMS43NzYxLTE3LjA3NiAyMC44NTMtMjcuMDggMi4zNjQ2LTIyLjcxNSAyNC43MjYtMTAuMTExIDMxLjQzNS05LjkwMDIgMy4zNTY2LTEwLjcwMSA5LjQwMDYtOC40NjQgMTQuNDk3IDIuNjU3NCA0Ljc4NDIgOS4wMTI2IDYuNDczNyAxMS41NDUgOS42NTE5LTYuNjI0IDAuNTk0MTktOC40MTEyIDUuNjAxMS01Ljc0MDQgOS41MTkyIDEuNjg5NiAyLjQ3ODcgNS4yNzU2IDQuMjIxOCA4LjU5NzEgNS41NDU1IDEuMDQ4NSAwLjQwNjU4IDMuNzAyIDEuMjczMiAzLjkwNTMgMi40MTgxIDAuMTg3NDQgMS4yMTU2LTYuNzg4NCAzLjAwNTUtNS43MjgxIDUuMjYxMiAwLjYwNjQ4IDEuNDIyNyAxLjc3NjQgMi43MTUxIDIuNjQ2NiAzLjcxNTYgMS4yODA3IDEuNjU5NSAxMC43NTUgOC4wMzUxIDkuNDU4MyA0LjIwNDktMS4wMjcxLTMuNzIzNC0yLjIxNDgtNy40NjgyLTMuMTQ1Ni0xMS4xOTItMS4xNjYyLTUuMzA2OS0xLjc4NjgtMTAuNzIxLTEuMTAyLTE2LjE1NiAxLjQyMjMtNS40NTUgNS4wNjktNC40MjY1IDcuNzgzNy04LjM1ODggMy41MjY0LTUuNzUwNSAyLjAyOTYtMTEuNjE0IDIuMTI0LTEzLjU3NSAwLjEwNy0xLjc4NjggMS41NDA3LTEuMTg3NiAzLjE4ODQtMS40MzM3IDQuMzg2OC0wLjY0MTk2IDcuMDA4MS0yLjExODUgOC44Mzc3LTYuMjY5OCAwLjc3MDM1LTEuOTI1OSAwLjYyMDU3LTkuNzU3OCAwLjUyNDI2LTExLjc4IDAuMzYzNzgtNC42MzI4IDQuMTgzNSAwIDYuNTQ4IDAuNjQxOTYgMy4yNjMzIDAuODg4MDUgNi44Nzk3IDAuMjEzOTkgOS4wNzMxLTIuNTAzNyAxLjc1NDctMi4zNzUzIDIuMDg2NC0yLjg4ODggNC42MTE0LTAuODAyNDUgMi42ODU2IDIuMjE0OCA0LjA5NzkgMy4xMzQ5IDcuNjkyOSAzLjI3NCA1LjU2MzcgMC4yMDMyOSA4Ljc3MzUtNi4yNjk4IDExLjMyLTUuNjM4NiAzLjUyMDEgMC44NzczNSAzLjYwNTcgNS40NTY3IDEwLjI2MSA0Ljg2ODIgMi4zODYtMC4yMDMyOSAzLjgzMDQtMC44NjY2NSA1LjQwMzItMi42NDI4IDAuODg4MDUtMC45OTUwNSAxLjk1OC0yLjUwMzcgMy40MzQ1LTIuNjIxNCAxLjQ2NTgtMC4xMTc3IDIuMzIxOCAyLjM2NDYgMy4wMDY1IDMuNDQ1MiAxLjE5MjYgMi42NzU1IDQuMDI5NSAzLjY1MTMgNi4yMzc3IDMuMzE2OCAxLjk1OC0wLjE3MTE5IDMuODU0LTEuNDExNSA1LjQyNjgtMi40NzA3IDAuOTk2NzktMC42NjEwMiAxLjgyODQtMC44MTEyOCAxLjkyNTYgMC4yMDcxIDAuMjk1OTIgMi4yMjcxIDAuMDg2MiA3LjcwMjUgMC4xNTk2IDguNDgyMSAwLjEwNTU2IDguNDYwOSA1LjM3IDEwLjU2OSAxMy4yMjMgMTAuMzMzLTAuMzE4NzEgMy43NDY0IDAuMDU4MyAxMS4yOCA1LjQzNTMgMTQuNTYyIDMuOTQ4MSAyLjc2MDQgNi42NjU3IDEuMjczMiA2LjcyOTkgNy44NTM0IDdlLTMgNi4xOTE0LTAuNDM2OTMgMTMuMDYxLTEuMjk0NiAxOC4xODktMC42OTU0NyA0LjA0NDQtMS4yNDEyIDYuNDgzOC0yLjUyNTEgMTAuMzc4LTAuNjQxOTYgMS45MTUyLTAuODEzMTUgMS45Njg3IDEuNDEyMyAxLjA2OTkgNy4xNDcyLTMuMTQ1NiAxMC41MzktMTEuNDggOC4zNTYyLTE4Ljg0Mi0wLjQzODY5LTIuMDQzNiAwLjg0NTI1LTEuNzIyNiAyLjg3ODEtMi42MTA2IDkuNTI0OC00LjIzNjMgOC4xMjY0LTExLjMzNS0wLjc1OTY3LTE0LjI3MyAxMS45ODgtMy4wOTI2IDEzLjg4Ni04LjkwMDIgNi42ODcxLTE1LjM3NSA3LjMwNzctNS45MTY4IDMuNjM3OC0xNi4xNzctMi44MDMyLTE2Ljk5MSAxMi40MjItNy4wOTM3IDUuNzM0OS0yMi4wNjItNS4xMDM2LTE4LjQ5OSA0LjE3MjgtMTIuMDM3LTUuNTYzNy0yNi4yMDMtMjEuMTIxLTE2Ljg5NCA2Ljk2NTMtMTEuMzczIDIuMDY1LTIyLjY2MS0xMi4xMDEtMTAuNzg1LTMuNDU1OS0xOC4zODItMTUuMTQtMTYuNTg0LTIzLjkwMi01LjAxOCAwLjA5NDM1LTIwLjA3NS0xNi4wMDEtMTcuNDItMTguMTQ2LTIuNTg5MnoiIHN0eWxlPSJmaWxsOiMwMDA7Ii8+PHBhdGggZD0ibTUuNDM1MyA4MC41MDJjNy40NDY4IDkuMTM3MyAxNS42MzIgOC44OTEyIDE1LjYzMiA4Ljg5MTJzLTYuMDc3MiAzLjc5ODMtNi44MzY5IDkuODc1NWMtMC43NTk2NiA2LjA4OCA0LjU1NzkgOS42Mjk1IDguMDk5NCAxMC42NDYgMy41NTIyIDEuMDA1OCA3LjA5MzctMi43OTI1IDcuMDkzNy0yLjc5MjVzLTUuODMxMiAxMC42NDYtMS41MTkzIDE1Ljk2NGM0LjMwMTIgNS4zMTc2IDExLjkwOCAzLjAzODYgMTEuOTA4IDMuMDM4NnMtNS4zMjgzIDEwLjEzMiAxLjAwNTcgMTQuMTg3YzUuODMxMiAzLjcyMzQgMTguNTQyIDcuNjcxNSAyMC41MTEgOC4yNzA2LTYuMDY2Ni05Ljc0NzItOS41NzYtMjEuMjQ5LTkuNTc2LTMzLjU3NXYtMC4wNDI4YzAtMzUuMjAxIDI4LjU0Ni02My43NDcgNjMuNzQ3LTYzLjc0NyAzNS4yMTIgMCA2My43NTggMjguNTQ2IDYzLjc1OCA2My43NDcgMCAxMi40NzYtMy41ODQzIDI0LjExNi05Ljc4OTkgMzMuOTQ5aDAuNTM0OTZzMTMuOTMxLTEuMDA1NyAxNi4yMS05LjM3MjdjMi4yNzktOC4zNTYyIDAuNzU5NjctOS44NzU2IDAuNzU5NjctOS44NzU2czEwLjYzNSAyLjAzMjkgMTMuNDE3LTcuNTk2NmwyLjc5MjYtOS42Mjk1czEwLjEzMiAwIDEwLjg5Mi03LjA4M2MwLjc1OTYzLTcuMDkzNy03LjAyOTUtMTIuNDExLTcuMDI5NS0xMi40MTFzMTEuNDU5IDAuODIzODUgMTQuNDk4LTEwLjQ1M2MxLjAxNjQtMy43NTU1IDAuODM0NTYtOC4yMTcxIDAuMTM5MS0xMi40OTctMTcuNjY1LTQxLjE2MS01OC41NjktNjkuOTk1LTEwNi4xOC02OS45OTUtMzAuNjMyIDAtNjAuMDM0IDEyLjE4Ny04MS42NzkgMzMuODMxdjAuMDEwN2MtMTMuMTcxIDEzLjE3MS0yMi44MzMgMjkuMjItMjguMzg2IDQ2LjY2eiIgc3R5bGU9ImZpbGw6IzAwMDsiLz48cGF0aCBkPSJtOTEuNzIgOTcuMzZ2MTEuNG00Ny41Ni0xMS40djExLjQiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDo3Ljk5OTlweDtzdHJva2U6IzAwMDsiLz48cGF0aCBkPSJtOTQuMTkgMTM2Ljg0aDQyLjYzMmEzLjc4MDEgMy43OCAwIDAgMSAzLjc4MDIgMy43OHYzLjIyYTE1LjIzMSAxNS4yMyAwIDAgMS0xNS4yMTEgMTUuMTZoLTE5Ljc4MWExNS4yNTEgMTUuMjUgMCAwIDEtMTUuMjIxLTE1LjE2di0zLjIyYTMuODAwMiAzLjggMCAwIDEgMy43ODAyLTMuNzh6IiBzdHlsZT0iZmlsbDojZmZmO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6M3B4O3N0cm9rZTojMDAwOyIvPjxwYXRoIGQ9Im0xMzAuOTYgMTM2Ljg0djIxLjE2bS0zMC45MTEtMjEuMTZ2MjEuMTZtMTAuMzQtMjEuMTZ2MjIuMTZtMTAuMzEtMjIuMnYyMi4yIiBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6M3B4O3N0cm9rZTojMDAwOyIvPjwvc3ZnPg==

    console.log(defaultAvatar)
  
  const toastOptions = {
    position: "top-center",
    autoClose: 8000,
    pauseOnHover: true,
    draggable: true,
    theme: "dark",
  };

  const parent_id = JSON.parse(
    localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY)
  )._id;
  //console.log(parent_id)
  const parent_username = JSON.parse(
    localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY)
  ).username;

  const handleClick = async (user) => {
    setSelectedUser(user);
    
    if (user) {
      const friends_list = await axios.get(`${getAllFriends}/${user._id}`);
      setFriendslist(friends_list);
      //for (let i = 0; i < friends_list.data.length; i++) {
      //  console.log(friends_list.data[i].username);
      //}
    }
       
    setChildAvatar(user.avatarImage);
    setChildId(user.username);
    const response = await fetch(`${getChildMessages.replace(':username', user.username)}`);
    const messages = await response.json();
    if (Array.isArray(messages) && messages.length === 0) {
      console.error(`${user.username} has not sent or received messages`);
      //return;
      }
    
    //console.log(messages);

    // Get child session time
    
    setChildName(user.username)
    // session time needs to be fixed regarding how it's added/multiplied/divided
    const session = await fetch(`${getSessionTime.replace(':id', user._id)}`);
    const data = await session.json();
    const sessionTimeInSeconds = data.sessionTime;
    const days = Math.floor(sessionTimeInSeconds / (24 * 3600));
    const hours = Math.floor((sessionTimeInSeconds % (24 * 3600)) / 3600);
    const minutes = Math.floor((sessionTimeInSeconds % 3600) / 60);
    const seconds = Math.floor(sessionTimeInSeconds % 60);
    const formattedSessionTime = `${days}d ${hours}h ${minutes}m ${seconds}s`;
    setSessionTime(formattedSessionTime);
  };

  useEffect(() => {
    const fetchData = async () => {
      const parent_data = await JSON.parse(
        localStorage.getItem(process.env.REACT_APP_LOCALHOST_KEY)
      );
      setChildUser(parent_data.parentChildLink)
      const parentLink = parent_data._id
      const data = await axios.get(`${getAllChildren}/${parentLink}`);
      const data_array = data.data
      setChildren(Array.from(data_array));
    }
    fetchData();
  }, []);

  const theme = useTheme();
  return (
    <>
      <Helmet>
        <title> Dashboard | KidzSnap.com </title>
      </Helmet>
      <Container maxWidth="xl">
        <Typography variant="h4" sx={{ mb: 5 }}>
          Hi {parent_username.toUpperCase()}, Welcome back<br />
        </Typography>

        <Grid container spacing={3}>
          {children.map((child, index) => (
            <React.Fragment key={index}>
              <Grid item xs='auto' sm={2} md={1.5} lg={1.5} xl={1.5}>
              <AppWidgetSummary username={child.username} avatarimage={`data:image/svg+xml;base64,${child.avatarImage ? child.avatarImage : base63string}`} onClick={() => handleClick(child)} />
              </Grid>
              {index !== children.length - 1 && <br />}
            </React.Fragment>
            
          ))}
          </Grid>
          <Grid container spacing={3} style = {{ paddingTop : 25 }}>
          <Grid item xs={12} md={12} lg={12}>
            <h1>{childName} Total Time Logged In: {sessionTime}</h1>
          </Grid>
          <GetRecentMessages childNameID={childId} childAvatarId={childAvatar} childs={children} />
          <GetPieChart childNameID={childId} childs={children} />
          <GetFriends childNameID={childId} friends={friendsList} />
          
        </Grid>
        <div>
          <MessageForm />
        </div>
      </Container>
    </>
  );
}
